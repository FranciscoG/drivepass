(function(){function e(e,t,n){for(var r=(n||0)-1,o=e?e.length:0;++r<o;)if(e[r]===t)return r;return-1}function t(e,t){for(var n=e.criteria,r=t.criteria,o=-1,i=n.length;++o<i;){var u=n[o],a=r[o];if(u!==a){if(u>a||"undefined"==typeof u)return 1;if(a>u||"undefined"==typeof a)return-1}}return e.index-t.index}function n(e){return"\\"+Pn[e]}function r(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,o=n-t||0,i=Array(0>o?0:o);++r<o;)i[r]=e[t+r];return i}function o(e){return e instanceof o?e:new i(e)}function i(e,t){this.__chain__=!!t,this.__wrapped__=e}function u(e){function t(){if(o){var e=r(o);Rn.apply(e,arguments)}if(this instanceof t){var u=a(n.prototype),s=n.apply(u,e||arguments);return N(s)?s:u}return n.apply(i,e||arguments)}var n=e[0],o=e[2],i=e[4];return t}function a(e){return N(e)?Mn(e):{}}function s(e,t,n){if("function"!=typeof e)return Ut;if("undefined"==typeof t||!("prototype"in e))return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)}}return At(e,t)}function c(e){function t(){var e=f?s:this;if(i){var m=r(i);Rn.apply(m,arguments)}if((u||g)&&(m||(m=r(arguments)),u&&Rn.apply(m,u),g&&m.length<l))return o|=16,c([n,v?o:-4&o,m,null,s,l]);if(m||(m=arguments),p&&(n=e[d]),this instanceof t){e=a(n.prototype);var h=n.apply(e,m);return N(h)?h:e}return n.apply(e,m)}var n=e[0],o=e[1],i=e[2],u=e[3],s=e[4],l=e[5],f=1&o,p=2&o,g=4&o,v=8&o,d=n;return t}function l(e,t){for(var n=-1,r=y(),o=e?e.length:0,i=[];++n<o;){var u=e[n];r(t,u)<0&&i.push(u)}return i}function f(e,t,n,r){for(var o=(r||0)-1,i=e?e.length:0,u=[];++o<i;){var a=e[o];if(a&&"object"==typeof a&&"number"==typeof a.length&&(zn(a)||w(a))){t||(a=f(a,t,n));var s=-1,c=a.length,l=u.length;for(u.length+=c;++s<c;)u[l++]=a[s]}else n||u.push(a)}return u}function p(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;var i=typeof e,u=typeof t;if(!(e!==e||e&&wn[i]||t&&wn[u]))return!1;if(null==e||null==t)return e===t;var a=An.call(e),s=An.call(t);if(a!=s)return!1;switch(a){case vn:case dn:return+e==+t;case hn:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case _n:case bn:return e==String(t)}var c=a==gn;if(!c){var l=e instanceof o,f=t instanceof o;if(l||f)return p(l?e.__wrapped__:e,f?t.__wrapped__:t,n,r);if(a!=yn)return!1;var g=e.constructor,v=t.constructor;if(g!=v&&!(C(g)&&g instanceof g&&C(v)&&v instanceof v)&&"constructor"in e&&"constructor"in t)return!1}n||(n=[]),r||(r=[]);for(var d=n.length;d--;)if(n[d]==e)return r[d]==t;var m=!0,h=0;if(n.push(e),r.push(t),c){if(h=t.length,m=h==e.length)for(;h--&&(m=p(e[h],t[h],n,r)););}else er(t,function(t,o,i){return Nn.call(i,o)?(h++,!(m=Nn.call(e,o)&&p(e[o],t,n,r))&&an):void 0}),m&&er(e,function(e,t,n){return Nn.call(n,t)?!(m=--h>-1)&&an:void 0});return n.pop(),r.pop(),m}function g(e,t){return e+Cn(Wn()*(t-e+1))}function v(e,t,n){for(var r=-1,o=y(),i=e?e.length:0,u=[],a=n?[]:u;++r<i;){var s=e[r],c=n?n(s,r,e):s;(t?!r||a[a.length-1]!==c:o(a,c)<0)&&(n&&a.push(c),u.push(s))}return u}function d(e){return function(t,n,r){var o={};n=Jt(n,r,3);var i=-1,u=t?t.length:0;if("number"==typeof u)for(;++i<u;){var a=t[i];e(o,a,n(a,i,t),t)}else tr(t,function(t,r,i){e(o,t,n(t,r,i),i)});return o}}function m(e,t,n,r,o,i){var a=2&t,s=16&t,l=32&t;if(!a&&!C(e))throw new TypeError;s&&!n.length&&(t&=-17,s=n=!1),l&&!r.length&&(t&=-33,l=r=!1);var f=1==t||17===t?u:c;return f([e,t,n,r,o,i])}function h(e){return Kn[e]}function y(){var t=(t=o.indexOf)===ht?e:t;return t}function _(e){return"function"==typeof e&&On.test(e)}function b(e){return Qn[e]}function w(e){return e&&"object"==typeof e&&"number"==typeof e.length&&An.call(e)==pn||!1}function P(e){if(!e)return e;for(var t=1,n=arguments.length;n>t;t++){var r=arguments[t];if(r)for(var o in r)e[o]=r[o]}return e}function D(e){return N(e)?zn(e)?r(e):P({},e):e}function S(e){if(!e)return e;for(var t=1,n=arguments.length;n>t;t++){var r=arguments[t];if(r)for(var o in r)"undefined"==typeof e[o]&&(e[o]=r[o])}return e}function x(e){var t=[];return er(e,function(e,n){C(e)&&t.push(n)}),t.sort()}function E(e,t){return e?Nn.call(e,t):!1}function I(e){for(var t=-1,n=Xn(e),r=n.length,o={};++t<r;){var i=n[t];o[e[i]]=i}return o}function B(e){return e===!0||e===!1||e&&"object"==typeof e&&An.call(e)==vn||!1}function j(e){return e&&"object"==typeof e&&An.call(e)==dn||!1}function T(e){return e&&1===e.nodeType||!1}function A(e){if(!e)return!0;if(zn(e)||q(e))return!e.length;for(var t in e)if(Nn.call(e,t))return!1;return!0}function O(e,t){return p(e,t)}function k(e){return qn(e)&&!Gn(parseFloat(e))}function C(e){return"function"==typeof e}function N(e){return!(!e||!wn[typeof e])}function R(e){return M(e)&&e!=+e}function L(e){return null===e}function M(e){return"number"==typeof e||e&&"object"==typeof e&&An.call(e)==hn||!1}function $(e){return e&&wn[typeof e]&&An.call(e)==_n||!1}function q(e){return"string"==typeof e||e&&"object"==typeof e&&An.call(e)==bn||!1}function G(e){return"undefined"==typeof e}function J(e){var t=[];er(e,function(e,n){t.push(n)}),t=l(t,f(arguments,!0,!1,1));for(var n=-1,r=t.length,o={};++n<r;){var i=t[n];o[i]=e[i]}return o}function F(e){for(var t=-1,n=Xn(e),r=n.length,o=Array(r);++t<r;){var i=n[t];o[t]=[i,e[i]]}return o}function U(e){for(var t=-1,n=f(arguments,!0,!1,1),r=n.length,o={};++t<r;){var i=n[t];i in e&&(o[i]=e[i])}return o}function W(e){for(var t=-1,n=Xn(e),r=n.length,o=Array(r);++t<r;)o[t]=e[n[t]];return o}function V(e,t){var n=y(),r=e?e.length:0,o=!1;return r&&"number"==typeof r?o=n(e,t)>-1:tr(e,function(e){return(o=e===t)&&an}),o}function z(e,t,n){var r=!0;t=Jt(t,n,3);var o=-1,i=e?e.length:0;if("number"==typeof i)for(;++o<i&&(r=!!t(e[o],o,e)););else tr(e,function(e,n,o){return!(r=!!t(e,n,o))&&an});return r}function H(e,t,n){var r=[];t=Jt(t,n,3);var o=-1,i=e?e.length:0;if("number"==typeof i)for(;++o<i;){var u=e[o];t(u,o,e)&&r.push(u)}else tr(e,function(e,n,o){t(e,n,o)&&r.push(e)});return r}function X(e,t,n){t=Jt(t,n,3);var r=-1,o=e?e.length:0;if("number"!=typeof o){var i;return tr(e,function(e,n,r){return t(e,n,r)?(i=e,an):void 0}),i}for(;++r<o;){var u=e[r];if(t(u,r,e))return u}}function K(e,t){return pt(e,t,!0)}function Q(e,t,n){var r=-1,o=e?e.length:0;if(t=t&&"undefined"==typeof n?t:s(t,n,3),"number"==typeof o)for(;++r<o&&t(e[r],r,e)!==an;);else tr(e,t)}function Y(e,t){var n=e?e.length:0;if("number"==typeof n)for(;n--&&t(e[n],n,e)!==!1;);else{var r=Xn(e);n=r.length,tr(e,function(e,o,i){return o=r?r[--n]:--n,t(i[o],o,i)===!1&&an})}}function Z(e,t){var n=r(arguments,2),o=-1,i="function"==typeof t,u=e?e.length:0,a=Array("number"==typeof u?u:0);return Q(e,function(e){a[++o]=(i?t:e[t]).apply(e,n)}),a}function et(e,t,n){var r=-1,o=e?e.length:0;if(t=Jt(t,n,3),"number"==typeof o)for(var i=Array(o);++r<o;)i[r]=t(e[r],r,e);else i=[],tr(e,function(e,n,o){i[++r]=t(e,n,o)});return i}function tt(e,t,n){var r=-1/0,o=r;"function"!=typeof t&&n&&n[t]===e&&(t=null);var i=-1,u=e?e.length:0;if(null==t&&"number"==typeof u)for(;++i<u;){var a=e[i];a>o&&(o=a)}else t=Jt(t,n,3),Q(e,function(e,n,i){var u=t(e,n,i);u>r&&(r=u,o=e)});return o}function nt(e,t,n){var r=1/0,o=r;"function"!=typeof t&&n&&n[t]===e&&(t=null);var i=-1,u=e?e.length:0;if(null==t&&"number"==typeof u)for(;++i<u;){var a=e[i];o>a&&(o=a)}else t=Jt(t,n,3),Q(e,function(e,n,i){var u=t(e,n,i);r>u&&(r=u,o=e)});return o}function rt(e,t,n,r){if(!e)return n;var o=arguments.length<3;t=Jt(t,r,4);var i=-1,u=e.length;if("number"==typeof u)for(o&&(n=e[++i]);++i<u;)n=t(n,e[i],i,e);else tr(e,function(e,r,i){n=o?(o=!1,e):t(n,e,r,i)});return n}function ot(e,t,n,r){var o=arguments.length<3;return t=Jt(t,r,4),Y(e,function(e,r,i){n=o?(o=!1,e):t(n,e,r,i)}),n}function it(e,t,n){return t=Jt(t,n,3),H(e,function(e,n,r){return!t(e,n,r)})}function ut(e,t,n){if(e&&"number"!=typeof e.length&&(e=W(e)),null==t||n)return e?e[g(0,e.length-1)]:on;var r=at(e);return r.length=Un(Fn(0,t),r.length),r}function at(e){var t=-1,n=e?e.length:0,r=Array("number"==typeof n?n:0);return Q(e,function(e){var n=g(0,++t);r[t]=r[n],r[n]=e}),r}function st(e){var t=e?e.length:0;return"number"==typeof t?t:Xn(e).length}function ct(e,t,n){var r;t=Jt(t,n,3);var o=-1,i=e?e.length:0;if("number"==typeof i)for(;++o<i&&!(r=t(e[o],o,e)););else tr(e,function(e,n,o){return(r=t(e,n,o))&&an});return!!r}function lt(e,n,r){var o=-1,i=e?e.length:0,u=Array("number"==typeof i?i:0);for(n=Jt(n,r,3),Q(e,function(e,t,r){u[++o]={criteria:[n(e,t,r)],index:o,value:e}}),i=u.length,u.sort(t);i--;)u[i]=u[i].value;return u}function ft(e){return zn(e)?r(e):e&&"number"==typeof e.length?et(e):W(e)}function pt(e,t,n){return n&&A(t)?on:(n?X:H)(e,t)}function gt(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var o=e[t];o&&r.push(o)}return r}function vt(e){return l(e,f(arguments,!0,!0,1))}function dt(e,t,n){var o=0,i=e?e.length:0;if("number"!=typeof t&&null!=t){var u=-1;for(t=Jt(t,n,3);++u<i&&t(e[u],u,e);)o++}else if(o=t,null==o||n)return e?e[0]:on;return r(e,0,Un(Fn(0,o),i))}function mt(e,t){return f(e,t)}function ht(t,n,r){if("number"==typeof r){var o=t?t.length:0;r=0>r?Fn(0,o+r):r||0}else if(r){var i=St(t,n);return t[i]===n?i:-1}return e(t,n,r)}function yt(e,t,n){var o=0,i=e?e.length:0;if("number"!=typeof t&&null!=t){var u=i;for(t=Jt(t,n,3);u--&&t(e[u],u,e);)o++}else o=null==t||n?1:t||o;return r(e,0,Un(Fn(0,i-o),i))}function _t(){for(var e=[],t=-1,n=arguments.length;++t<n;){var r=arguments[t];(zn(r)||w(r))&&e.push(r)}var o=e[0],i=-1,u=y(),a=o?o.length:0,s=[];e:for(;++i<a;)if(r=o[i],u(s,r)<0){for(var t=n;--t;)if(u(e[t],r)<0)continue e;s.push(r)}return s}function bt(e,t,n){var o=0,i=e?e.length:0;if("number"!=typeof t&&null!=t){var u=i;for(t=Jt(t,n,3);u--&&t(e[u],u,e);)o++}else if(o=t,null==o||n)return e?e[i-1]:on;return r(e,Fn(0,i-o))}function wt(e,t,n){var r=e?e.length:0;for("number"==typeof n&&(r=(0>n?Fn(0,r+n):Un(n,r-1))+1);r--;)if(e[r]===t)return r;return-1}function Pt(e,t,n){e=+e||0,n=+n||1,null==t&&(t=e,e=0);for(var r=-1,o=Fn(0,kn((t-e)/n)),i=Array(o);++r<o;)i[r]=e,e+=n;return i}function Dt(e,t,n){if("number"!=typeof t&&null!=t){var o=0,i=-1,u=e?e.length:0;for(t=Jt(t,n,3);++i<u&&t(e[i],i,e);)o++}else o=null==t||n?1:Fn(0,t);return r(e,o)}function St(e,t,n,r){var o=0,i=e?e.length:o;for(n=n?Jt(n,r,1):Ut,t=n(t);i>o;){var u=o+i>>>1;n(e[u])<t?o=u+1:i=u}return o}function xt(){return v(f(arguments,!0,!0))}function Et(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n="function"!=typeof t&&r&&r[t]===e?null:t,t=!1),null!=n&&(n=Jt(n,r,3)),v(e,t,n)}function It(e){return l(e,r(arguments,1))}function Bt(){for(var e=-1,t=tt(ir(arguments,"length")),n=Array(0>t?0:t);++e<t;)n[e]=ir(arguments,e);return n}function jt(e,t){var n=-1,r=e?e.length:0,o={};for(t||!r||zn(e[0])||(t=[]);++n<r;){var i=e[n];t?o[i]=t[n]:i&&(o[i[0]]=i[1])}return o}function Tt(e,t){if(!C(t))throw new TypeError;return function(){return--e<1?t.apply(this,arguments):void 0}}function At(e,t){return arguments.length>2?m(e,17,r(arguments,2),null,t):m(e,1,null,null,t)}function Ot(e){for(var t=arguments.length>1?f(arguments,!0,!1,1):x(e),n=-1,r=t.length;++n<r;){var o=t[n];e[o]=m(e[o],1,null,null,e)}return e}function kt(){for(var e=arguments,t=e.length;t--;)if(!C(e[t]))throw new TypeError;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}}function Ct(e,t,n){var r,o,i,u,a,s,c,l=0,f=!1,p=!0;if(!C(e))throw new TypeError;if(t=Fn(0,t)||0,n===!0){var g=!0;p=!1}else N(n)&&(g=n.leading,f="maxWait"in n&&(Fn(t,n.maxWait)||0),p="trailing"in n?n.trailing:p);var v=function(){var n=t-(ur()-u);if(0>=n){o&&clearTimeout(o);var f=c;o=s=c=on,f&&(l=ur(),i=e.apply(a,r),s||o||(r=a=null))}else s=setTimeout(v,n)},d=function(){s&&clearTimeout(s),o=s=c=on,(p||f!==t)&&(l=ur(),i=e.apply(a,r),s||o||(r=a=null))};return function(){if(r=arguments,u=ur(),a=this,c=p&&(s||!g),f===!1)var n=g&&!s;else{o||g||(l=u);var m=f-(u-l),h=0>=m;h?(o&&(o=clearTimeout(o)),l=u,i=e.apply(a,r)):o||(o=setTimeout(d,m))}return h&&s?s=clearTimeout(s):s||t===f||(s=setTimeout(v,t)),n&&(h=!0,i=e.apply(a,r)),!h||s||o||(r=a=null),i}}function Nt(e){if(!C(e))throw new TypeError;var t=r(arguments,1);return setTimeout(function(){e.apply(on,t)},1)}function Rt(e,t){if(!C(e))throw new TypeError;var n=r(arguments,2);return setTimeout(function(){e.apply(on,n)},t)}function Lt(e,t){var n={};return function(){var r=t?t.apply(this,arguments):sn+arguments[0];return Nn.call(n,r)?n[r]:n[r]=e.apply(this,arguments)}}function Mt(e){var t,n;if(!C(e))throw new TypeError;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function $t(e){return m(e,16,r(arguments,1))}function qt(e,t,n){var r=!0,o=!0;if(!C(e))throw new TypeError;return n===!1?r=!1:N(n)&&(r="leading"in n?n.leading:r,o="trailing"in n?n.trailing:o),n={},n.leading=r,n.maxWait=t,n.trailing=o,Ct(e,t,n)}function Gt(e,t){return m(t,16,[e])}function Jt(e,t,n){var r=typeof e;if(null==e||"function"==r)return s(e,t,n);if("object"!=r)return zt(e);var o=Xn(e);return function(t){for(var n=o.length,r=!1;n--&&(r=t[o[n]]===e[o[n]]););return r}}function Ft(e){return null==e?"":String(e).replace(Zn,h)}function Ut(e){return e}function Wt(e){Q(x(e),function(t){var n=o[t]=e[t];o.prototype[t]=function(){var e=[this.__wrapped__];Rn.apply(e,arguments);var t=n.apply(o,e);return this.__chain__?new i(t,!0):t}})}function Vt(){return Dn._=Tn,this}function zt(e){return function(t){return t[e]}}function Ht(e,t){return null==e&&null==t&&(t=1),e=+e||0,null==t?(t=e,e=0):t=+t||0,e+Cn(Wn()*(t-e+1))}function Xt(e,t){if(e){var n=e[t];return C(n)?e[t]():n}}function Kt(e,t,r){var i=o,u=i.templateSettings;e=String(e||""),r=S({},r,u);var a=0,s="__p += '",c=r.variable,l=RegExp((r.escape||ln).source+"|"+(r.interpolate||ln).source+"|"+(r.evaluate||ln).source+"|$","g");e.replace(l,function(t,r,o,i,u){return s+=e.slice(a,u).replace(fn,n),r&&(s+="' +\n_.escape("+r+") +\n'"),i&&(s+="';\n"+i+";\n__p += '"),o&&(s+="' +\n((__t = ("+o+")) == null ? '' : __t) +\n'"),a=u+t.length,t}),s+="';\n",c||(c="obj",s="with ("+c+" || {}) {\n"+s+"\n}\n"),s="function("+c+") {\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n"+s+"return __p\n}";try{var f=Function("_","return "+s)(i)}catch(p){throw p.source=s,p}return t?f(t):(f.source=s,f)}function Qt(e,t,n){e=(e=+e)>-1?e:0;var r=-1,o=Array(e);for(t=s(t,n,1);++r<e;)o[r]=t(r);return o}function Yt(e){return null==e?"":String(e).replace(Yn,b)}function Zt(e){var t=++un+"";return e?e+t:t}function en(e){return e=new i(e),e.__chain__=!0,e}function tn(e,t){return t(e),e}function nn(){return this.__chain__=!0,this}function rn(){return this.__wrapped__}var on,un=0,an={},sn=+new Date+"",cn=/<%=([\s\S]+?)%>/g,ln=/($^)/,fn=/['\n\r\t\u2028\u2029\\]/g,pn="[object Arguments]",gn="[object Array]",vn="[object Boolean]",dn="[object Date]",mn="[object Function]",hn="[object Number]",yn="[object Object]",_n="[object RegExp]",bn="[object String]",wn={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Pn={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},Dn=wn[typeof window]&&window||this,Sn=wn[typeof exports]&&exports&&!exports.nodeType&&exports,xn=wn[typeof module]&&module&&!module.nodeType&&module,En=xn&&xn.exports===Sn&&Sn,In=wn[typeof global]&&global;!In||In.global!==In&&In.window!==In||(Dn=In);var Bn=[],jn=Object.prototype,Tn=Dn._,An=jn.toString,On=RegExp("^"+String(An).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),kn=Math.ceil,Cn=Math.floor,Nn=jn.hasOwnProperty,Rn=Bn.push,Ln=jn.propertyIsEnumerable,Mn=_(Mn=Object.create)&&Mn,$n=_($n=Array.isArray)&&$n,qn=Dn.isFinite,Gn=Dn.isNaN,Jn=_(Jn=Object.keys)&&Jn,Fn=Math.max,Un=Math.min,Wn=Math.random;i.prototype=o.prototype;var Vn={};!function(){var e={0:1,length:1};Vn.spliceObjects=(Bn.splice.call(e,0,1),!e[0])}(1),o.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:cn,variable:""},Mn||(a=function(){function e(){}return function(t){if(N(t)){e.prototype=t;var n=new e;e.prototype=null}return n||Dn.Object()}}()),w(arguments)||(w=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Nn.call(e,"callee")&&!Ln.call(e,"callee")||!1});var zn=$n||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&An.call(e)==gn||!1},Hn=function(e){var t,n=e,r=[];if(!n)return r;if(!wn[typeof e])return r;for(t in n)Nn.call(n,t)&&r.push(t);return r},Xn=Jn?function(e){return N(e)?Jn(e):[]}:Hn,Kn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Qn=I(Kn),Yn=RegExp("("+Xn(Qn).join("|")+")","g"),Zn=RegExp("["+Xn(Kn).join("")+"]","g"),er=function(e,t){var n,r=e,o=r;if(!r)return o;if(!wn[typeof r])return o;for(n in r)if(t(r[n],n,e)===an)return o;return o},tr=function(e,t){var n,r=e,o=r;if(!r)return o;if(!wn[typeof r])return o;for(n in r)if(Nn.call(r,n)&&t(r[n],n,e)===an)return o;return o};C(/x/)&&(C=function(e){return"function"==typeof e&&An.call(e)==mn});var nr=d(function(e,t,n){Nn.call(e,n)?e[n]++:e[n]=1}),rr=d(function(e,t,n){(Nn.call(e,n)?e[n]:e[n]=[]).push(t)}),or=d(function(e,t,n){e[n]=t}),ir=et,ur=_(ur=Date.now)&&ur||function(){return(new Date).getTime()};o.after=Tt,o.bind=At,o.bindAll=Ot,o.chain=en,o.compact=gt,o.compose=kt,o.countBy=nr,o.debounce=Ct,o.defaults=S,o.defer=Nt,o.delay=Rt,o.difference=vt,o.filter=H,o.flatten=mt,o.forEach=Q,o.functions=x,o.groupBy=rr,o.indexBy=or,o.initial=yt,o.intersection=_t,o.invert=I,o.invoke=Z,o.keys=Xn,o.map=et,o.max=tt,o.memoize=Lt,o.min=nt,o.omit=J,o.once=Mt,o.pairs=F,o.partial=$t,o.pick=U,o.pluck=ir,o.range=Pt,o.reject=it,o.rest=Dt,o.shuffle=at,o.sortBy=lt,o.tap=tn,o.throttle=qt,o.times=Qt,o.toArray=ft,o.union=xt,o.uniq=Et,o.values=W,o.where=pt,o.without=It,o.wrap=Gt,o.zip=Bt,o.collect=et,o.drop=Dt,o.each=Q,o.extend=P,o.methods=x,o.object=jt,o.select=H,o.tail=Dt,o.unique=Et,o.clone=D,o.contains=V,o.escape=Ft,o.every=z,o.find=X,o.has=E,o.identity=Ut,o.indexOf=ht,o.isArguments=w,o.isArray=zn,o.isBoolean=B,o.isDate=j,o.isElement=T,o.isEmpty=A,o.isEqual=O,o.isFinite=k,o.isFunction=C,o.isNaN=R,o.isNull=L,o.isNumber=M,o.isObject=N,o.isRegExp=$,o.isString=q,o.isUndefined=G,o.lastIndexOf=wt,o.mixin=Wt,o.noConflict=Vt,o.random=Ht,o.reduce=rt,o.reduceRight=ot,o.result=Xt,o.size=st,o.some=ct,o.sortedIndex=St,o.template=Kt,o.unescape=Yt,o.uniqueId=Zt,o.all=z,o.any=ct,o.detect=X,o.findWhere=K,o.foldl=rt,o.foldr=ot,o.include=V,o.inject=rt,o.first=dt,o.last=bt,o.sample=ut,o.take=dt,o.head=dt,Wt(o),o.VERSION="2.4.1",o.prototype.chain=nn,o.prototype.value=rn,Q(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=Bn[e];o.prototype[e]=function(){var e=this.__wrapped__;return t.apply(e,arguments),Vn.spliceObjects||0!==e.length||delete e[0],this}}),Q(["concat","join","slice"],function(e){var t=Bn[e];o.prototype[e]=function(){var e=this.__wrapped__,n=t.apply(e,arguments);return this.__chain__&&(n=new i(n),n.__chain__=!0),n}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Dn._=o,define(function(){return o})):Sn&&xn?En?(xn.exports=o)._=o:Sn._=o:Dn._=o}).call(this);var DrivePass=DrivePass||{};DrivePass.Browser={isChrome:function(){return/Chrome/.test(navigator.userAgent)},ChromeExt:function(){chrome.runtime?chrome.runtime.onMessage||(chrome.runtime.onMessage=chrome.extension.onMessage,chrome.runtime.sendMessage=chrome.extension.sendMessage,chrome.runtime.onConnect=chrome.extension.onConnect,chrome.runtime.connect=chrome.extension.connect):chrome.runtime=chrome.extension},isFirefox:function(){return/Firefox/.test(navigator.userAgent)},sendToPage:function(e){var t=e||{};return 2!==Object.keys(t).length?!1:void(this.isChrome()&&chrome.tabs.getSelected(null,function(e){chrome.tabs.sendMessage(e.id,{password:t.password,username:t.username},function(e){console.log(e.dom)})}))},getActiveTab:function(e){this.isChrome()&&chrome.tabs.query({active:!0,lastFocusedWindow:!0},function(t){var n=t[0];this.activeTabUrl=utils.getHostname(n.url),"function"==typeof e&&e()}.bind(this))},oAuthSendRequest:function(e,t,n){this.isChrome()&&(this.ChromeExt(),chrome.runtime.getBackgroundPage(function(r){r.oauth.sendSignedRequest(e,t,n)}))}};var DrivePass=DrivePass||{};DrivePass.GoogleDrive=function(){var e={};e.driveAPI="https://www.googleapis.com/upload/drive/v2/files";var t=function(e,t){console.log(e),console.log(t)},n=function(e,t){var n="-------314159265358979323846",o="\r\n--"+n+"\r\n",i="\r\n--"+n+"--",u=new FileReader;u.readAsBinaryString(e),u.onload=function(){var n=e.type||"application/octet-stream",a={title:e.fileName,mimeType:n},s=btoa(u.result),c=o+"Content-Type: application/json\r\n\r\n"+JSON.stringify(a)+o+"Content-Type: "+n+"\r\nContent-Transfer-Encoding: base64\r\n\r\n"+s+i;r(c,t)}},r=function(n,r){e.cb="function"==typeof r?r:t;var o="-------314159265358979323846",i={method:"POST",params:{convert:!0,uploadType:"multipart",visibility:"private"},headers:{"Content-Type":'multipart/mixed; boundary="'+o+'"'},body:n};DrivePass.Browser.oAuthSendRequest(e.driveAPI,e.cb,i)},o=function(){var e=new Blob(["site,username,password"],{type:"text/csv",fileName:"DrivePass DB"});n(e,t)};return{init:o}};var DrivePass=DrivePass||{};DrivePass.GoogleSpreadsheet=function(){var e,t={},n=function(n,r){return 200!==r.status?(e={success:!1,message:r.status+": Connection Failed"},console.warn(r)):(e={success:!0,message:"spreadsheet successfully loaded"},e.sheetData=JSON.parse(n)),DrivePass.Signal.broadcast("gs_data_loaded",e),null!==t.cb&&t.cb(e),e},r=function(e){t.cb="function"==typeof e?e:null;var r={headers:{"GData-Version":"3.0"},parameters:{alt:"json",showfolders:"true"}};DrivePass.Browser.oAuthSendRequest(t.jsonListUrl,n,r)},o=function(e,n){t.cb="function"==typeof n?n:null;var r={method:"POST",headers:{"GData-Version":"3.0","Content-Type":"application/atom+xml"},body:i(e)};DrivePass.Browser.oAuthSendRequest(t.jsonListUrl,s,r)},i=function(e){for(var n='<entry xmlns="http://www.w3.org/2005/Atom" xmlns:gsx="http://schemas.google.com/spreadsheets/2006/extended">\n',r=t.columns,o=0;o<r.length;o++)n+="<gsx:"+r[o]+">"+e[o]+"</gsx:"+r[o]+">\n";return n+="</entry>"},u=function(e,n){var r="<entry xmlns='http://www.w3.org/2005/Atom' xmlns:gsx='http://schemas.google.com/spreadsheets/2006/extended' ";r+="xmlns:gd='http://schemas.google.com/g/2005' gd:etag='"+e.gd$etag+"'>\n",r+="<id>"+e.id.$t+"</id>\n",r+="<updated>"+e.updated.$t+"</updated>\n",r+='<category scheme="http://schemas.google.com/spreadsheets/2006" term="http://schemas.google.com/spreadsheets/2006#list"/>\n',r+="<title type='text'>"+e.title.$t+"</title>\n",r+="<content type='text'>"+e.content.$t+"</content>\n",r+='<link rel="self" type="application/atom+xml" href="'+e.link[0].href+'"/>\n',r+='<link rel="edit" type="application/atom+xml" href="'+e.link[1].href+'"/>\n';for(var o=t.columns,i=0;i<o.length;i++)r+="<gsx:"+o[i]+">"+n[i]+"</gsx:"+o[i]+">\n";return r+="</entry>"},a=function(e,n,r){t.cb="function"==typeof r?r:null;var o={method:"PUT",headers:{"GData-Version":"3.0","Content-Type":"application/atom+xml","if-match":"*"},body:u(e,n)};DrivePass.Browser.oAuthSendRequest(e.link[1].href,c,o)},s=function(n,r){return 201!==r.status?(e={success:!1,message:r.status+": error saving"},console.warn(r)):e={success:!0,message:"saved successfully"},DrivePass.Signal.broadcast("gs_data_added",e),null!==t.cb&&t.cb(e),e},c=function(n,r){return 200!==r.status?(e={success:!1,message:r.status+": error updating"},console.warn(r)):e={success:!0,message:"update successful"},DrivePass.Signal.broadcast("gs_data_updated",e),null!==t.cb&&t.cb(e),e},l=function(e){if(t=e||{},"string"!=typeof t.sheet_url||"object"!=typeof t.columns)throw new Error("Missing sheet_url or columns from init options");var n,r,o=t.sheet_url;if(o.match(/http(s)*:/)){n=o;try{r=n.match(/key=(.*?)(&|#)/)[1]}catch(i){r=n.match(/(cells|list)\/(.*?)\//)[2]}}else r=o;return t.jsonListUrl="https://spreadsheets.google.com/feeds/list/"+r+"/od6/private/full",t.jsonCellsUrl="https://spreadsheets.google.com/feeds/cells/"+r+"/od6/private/basic",this};return{init:l,load:r,add:o,update:a}};var DrivePass=DrivePass||{};DrivePass.Options=function(){function e(){var e=o.value,t=r.value;localStorage.setItem("sheet_url",e),localStorage.setItem("app_name",t),DrivePass.Settings.gs_sheet_init.sheet_url=e,n.init(DrivePass.Settings.gs_sheet_init),DrivePass.Signal.listen("gs_data_loaded",function(e,t){localStorage.setItem("_data",JSON.stringify(t))}),n.load(),i.textContent="Options Saved.",c&&_.delay(chrome.runtime.reload,1e3)}function t(){var e=localStorage.getItem("sheet_url"),t=localStorage.getItem("app_name");return r.value=t,null===e||""===e?!1:(o.value=e,a.textContent="update",s.href=e,s.style.display="block",void 0)}var n=new DrivePass.GoogleSpreadsheet,r=document.getElementById("appName"),o=document.getElementById("sheet_url"),i=document.getElementById("status"),u=document.getElementById("setAppName"),a=document.getElementById("save"),s=document.getElementById("goToSheet"),c=(document.getElementById("makeSheet"),!1);utils.toggler("inst_link","instructions");var l=localStorage.getItem("app_name");null===l&&(u.classList.add("show"),c=!0),document.addEventListener("DOMContentLoaded",t),a.addEventListener("click",e)};var DrivePass=DrivePass||{};DrivePass.Generator=function(){var e=document.getElementById("uppercase"),t=document.getElementById("lowercase"),n=document.getElementById("numbers"),r=document.getElementById("show_symbols"),o=document.getElementById("symbols"),i=document.getElementById("pw"),u=function(){var i="",u=0,a="",s=document.getElementById("digits").value||15;if(2>s&&(s=7),[e,t,n].forEach(function(e){if(e.checked===!0){a+=e.value;var t=e.value.length;i+=e.value.charAt(Math.floor(Math.random()*t)),u++}}),r.checked===!0){a+=o.value;var c=o.value.length;i+=o.value.charAt(Math.floor(Math.random()*c)),u++}return[s,a,i,u]},a=function(e){e.preventDefault();for(var t=u(),n=t[0]-t[3],r=t[1],o="",a=0,s=r.length;n>a;++a)o+=r.charAt(Math.floor(Math.random()*s));return o+=t[2],i.textContent=o,i.className="generated",!0},s=function(){document.getElementById("makePassword").addEventListener("click",a,!1)};return{init:s}};var DrivePass=DrivePass||{};DrivePass.Password={findPW:function(e,t){var n=e||{},r=[];if(_.keys(n).length>0){for(var o in n)-1!==t.indexOf(n[o].site.trim())&&r.push(n[o].username,n[o].password,n[o].site);return r}throw new Error("findPW: data not an object")},filterResults:function(e){var t=e||{},n=0,r={},o=t.feed.entry,i=DrivePass.Settings.gs_sheet_init.columns;for(var u in o){r[n]={};for(var a=0;a<i.length;a++){var s="gsx$"+i[a];r[n][i[a]]=o[u][s].$t}n++}return r}};var DrivePass=DrivePass||{};DrivePass.Popup=function(){var e,t=document.getElementById("loading"),n=document.getElementById("status"),r=document.getElementById("un"),o=document.getElementById("pw"),i=document.getElementById("add"),u=document.getElementById("update"),a=document.getElementById("theInfo"),s=document.getElementById("hdnSite"),c=JSON.parse(localStorage.getItem("_data")),l=JSON.parse(localStorage.getItem("_full")),f=new DrivePass.GoogleSpreadsheet;f.init(DrivePass.Settings.gs_sheet_init);var p=function(e,t){var r=e||"",o=t||"";""!==r&&""!==o&&(n.textContent=o,n.className=r,n.style.display="block")},g=function(e){t.style.display="none",p("success","password found"),r.textContent=e[0],o.textContent=e[1],s.value=e[2],DrivePass.Browser.sendToPage({username:e[0],password:e[1]}),i.classList.remove("show"),u.classList.add("show")},v=function(){t.style.display="none",p("error","password not found"),utils.toggle(a)},d=function(){i.addEventListener("click",function(){var t=document.getElementById("un").textContent,n=document.getElementById("pw").textContent,r=[e,t,n];f.add(r,function(e){e.success===!1?p("error",e.message):(p("success",e.message),_())})},!1)},m=function(){u.addEventListener("click",function(){var e=s.value,t=h(e),n=document.getElementById("un").textContent,r=document.getElementById("pw").textContent,o=[e,n,r];f.update(t,o,function(e){e.success===!1?p("error",e.message):(p("success",e.message),_())})},!1)},h=function(e){var t=l.sheetData;for(var n in t.feed.entry)if(t.feed.entry[n].gsx$site.$t===e)return t.feed.entry[n]},y=function(){e=DrivePass.Browser.activeTabUrl;var t=DrivePass.Password.findPW(c,e);3!==t.length?v():g(t)},_=function(e){f.load(function(t){localStorage.setItem("_full",JSON.stringify(t)),t.success===!0&&(c=DrivePass.Password.filterResults(t.sheetData),localStorage.setItem("_data",JSON.stringify(c)),"function"==typeof e&&e())})},b=function(){localStorage.sheet_url&&""!==localStorage.sheet_url?(null===c||null===l?_(function(){DrivePass.Browser.getActiveTab(y)}):DrivePass.Browser.getActiveTab(y),d(),m()):p("error","no spreadsheet set in options")};return{init:b,resetLocal:_}};var DrivePass=DrivePass||{};DrivePass.ResetLocal=function(){var e=new DrivePass.GoogleSpreadsheet;e.init(DrivePass.Settings.gs_sheet_init);var t=function(t){e.load(function(e){if(localStorage.setItem("_full",JSON.stringify(e)),e.success===!0){var n=DrivePass.Password.filterResults(e.sheetData);localStorage.setItem("_data",JSON.stringify(n)),"function"==typeof t&&t()}})};return{init:t}};var DrivePass=DrivePass||{};DrivePass.Router=function(){function e(e){this.methods=e,this.process()}return e.prototype.process=function(){this.methods.universal();var e=document.body.dataset.route;if("undefined"!=typeof e){var t=this.methods[e];"function"==typeof t&&t()}},e}();var DrivePass=DrivePass||{};DrivePass.Signal=function(){"use strict";var e={},t=-1,n=function(n,r){e[n]||(e[n]=[]);var o=(++t).toString();return e[n].push({token:o,func:r}),o},r=function(t,n){return e[t]?(setTimeout(function(){for(var r=e[t],o=r?r.length:0;o--;)r[o].func(t,n)},0),!0):!1},o=function(t){for(var n in e)if(e[n])for(var r=0,o=e[n].length;o>r;r++)if(e[n][r].token===t)return e[n].splice(r,1),t;return!1};return{broadcast:r,listen:n,off:o}}();var utils={toggle:function(e){e.classList.contains("show")?e.classList.remove("show"):e.classList.add("show")},toggler:function(e,t){var n=this,r=document.getElementById(t);document.getElementById(e).addEventListener("click",function(){n.toggle(r)},!1)},getHostname:function(e){var t=e||"",n=document.createElement("a");return""!==t?(n.href=t,n.hostname):(console.warn("url undefined"),!1)},addslashes:function(e){return(e+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")},getJSON:function(e,t,n){var r,o=new XMLHttpRequest,i=function(){console.log("")},u="function"==typeof t?t:i,a="function"==typeof n?n:i;o.open("GET",e,!1),o.onload=function(){o.status>=200&&o.status<400?(r=JSON.parse(o.responseText),u(r)):a()},o.onerror=function(){a()},o.send(null)}},DrivePass=DrivePass||{};DrivePass.ext=new DrivePass.Router({universal:function(){DrivePass.Settings=JSON.parse(localStorage.getItem("options"))||{},DrivePass.Settings.keeplocal=DrivePass.Settings.keeplocal||!0,DrivePass.Settings.route=document.body.dataset.route,DrivePass.Settings.gs_sheet_init={sheet_url:localStorage.getItem("sheet_url"),columns:["site","username","password"]}},popup:function(){var e=function(){utils.toggler("showGPoptions","gpOptions"),utils.toggler("showInfo","theInfo"),utils.toggler("show_symbols","hidden_symbols")},t=new DrivePass.Popup,n=new DrivePass.Generator;document.addEventListener("DOMContentLoaded",function(){this.bDone||(this.bDone=!0,n.init(),t.init(),e())})},chrome_options:function(){new DrivePass.Options}});