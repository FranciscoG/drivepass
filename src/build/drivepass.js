(function(){function e(e,t,n){for(var r=(n||0)-1,o=e?e.length:0;++r<o;)if(e[r]===t)return r;return-1}function t(e,t){for(var n=e.criteria,r=t.criteria,o=-1,u=n.length;++o<u;){var i=n[o],a=r[o];if(i!==a){if(i>a||"undefined"==typeof i)return 1;if(a>i||"undefined"==typeof a)return-1}}return e.index-t.index}function n(e){return"\\"+Dn[e]}function r(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,o=n-t||0,u=Array(0>o?0:o);++r<o;)u[r]=e[t+r];return u}function o(e){return e instanceof o?e:new u(e)}function u(e,t){this.__chain__=!!t,this.__wrapped__=e}function i(e){function t(){if(o){var e=r(o);Nn.apply(e,arguments)}if(this instanceof t){var i=a(n.prototype),s=n.apply(i,e||arguments);return M(s)?s:i}return n.apply(u,e||arguments)}var n=e[0],o=e[2],u=e[4];return t}function a(e){return M(e)?Rn(e):{}}function s(e,t,n){if("function"!=typeof e)return Ut;if("undefined"==typeof t||!("prototype"in e))return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,u){return e.call(t,n,r,o,u)}}return At(e,t)}function c(e){function t(){var e=f?s:this;if(u){var m=r(u);Nn.apply(m,arguments)}if((i||g)&&(m||(m=r(arguments)),i&&Nn.apply(m,i),g&&m.length<l))return o|=16,c([n,d?o:-4&o,m,null,s,l]);if(m||(m=arguments),p&&(n=e[v]),this instanceof t){e=a(n.prototype);var h=n.apply(e,m);return M(h)?h:e}return n.apply(e,m)}var n=e[0],o=e[1],u=e[2],i=e[3],s=e[4],l=e[5],f=1&o,p=2&o,g=4&o,d=8&o,v=n;return t}function l(e,t){for(var n=-1,r=y(),o=e?e.length:0,u=[];++n<o;){var i=e[n];r(t,i)<0&&u.push(i)}return u}function f(e,t,n,r){for(var o=(r||0)-1,u=e?e.length:0,i=[];++o<u;){var a=e[o];if(a&&"object"==typeof a&&"number"==typeof a.length&&(zn(a)||w(a))){t||(a=f(a,t,n));var s=-1,c=a.length,l=i.length;for(i.length+=c;++s<c;)i[l++]=a[s]}else n||i.push(a)}return i}function p(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;var u=typeof e,i=typeof t;if(!(e!==e||e&&wn[u]||t&&wn[i]))return!1;if(null==e||null==t)return e===t;var a=An.call(e),s=An.call(t);if(a!=s)return!1;switch(a){case dn:case vn:return+e==+t;case hn:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case _n:case bn:return e==String(t)}var c=a==gn;if(!c){var l=e instanceof o,f=t instanceof o;if(l||f)return p(l?e.__wrapped__:e,f?t.__wrapped__:t,n,r);if(a!=yn)return!1;var g=e.constructor,d=t.constructor;if(g!=d&&!(C(g)&&g instanceof g&&C(d)&&d instanceof d)&&"constructor"in e&&"constructor"in t)return!1}n||(n=[]),r||(r=[]);for(var v=n.length;v--;)if(n[v]==e)return r[v]==t;var m=!0,h=0;if(n.push(e),r.push(t),c){if(h=t.length,m=h==e.length)for(;h--&&(m=p(e[h],t[h],n,r)););}else er(t,function(t,o,u){return Mn.call(u,o)?(h++,!(m=Mn.call(e,o)&&p(e[o],t,n,r))&&an):void 0}),m&&er(e,function(e,t,n){return Mn.call(n,t)?!(m=--h>-1)&&an:void 0});return n.pop(),r.pop(),m}function g(e,t){return e+Cn(Wn()*(t-e+1))}function d(e,t,n){for(var r=-1,o=y(),u=e?e.length:0,i=[],a=n?[]:i;++r<u;){var s=e[r],c=n?n(s,r,e):s;(t?!r||a[a.length-1]!==c:o(a,c)<0)&&(n&&a.push(c),i.push(s))}return i}function v(e){return function(t,n,r){var o={};n=Ft(n,r,3);var u=-1,i=t?t.length:0;if("number"==typeof i)for(;++u<i;){var a=t[u];e(o,a,n(a,u,t),t)}else tr(t,function(t,r,u){e(o,t,n(t,r,u),u)});return o}}function m(e,t,n,r,o,u){var a=2&t,s=16&t,l=32&t;if(!a&&!C(e))throw new TypeError;s&&!n.length&&(t&=-17,s=n=!1),l&&!r.length&&(t&=-33,l=r=!1);var f=1==t||17===t?i:c;return f([e,t,n,r,o,u])}function h(e){return Kn[e]}function y(){var t=(t=o.indexOf)===ht?e:t;return t}function _(e){return"function"==typeof e&&On.test(e)}function b(e){return Qn[e]}function w(e){return e&&"object"==typeof e&&"number"==typeof e.length&&An.call(e)==pn||!1}function D(e){if(!e)return e;for(var t=1,n=arguments.length;n>t;t++){var r=arguments[t];if(r)for(var o in r)e[o]=r[o]}return e}function P(e){return M(e)?zn(e)?r(e):D({},e):e}function x(e){if(!e)return e;for(var t=1,n=arguments.length;n>t;t++){var r=arguments[t];if(r)for(var o in r)"undefined"==typeof e[o]&&(e[o]=r[o])}return e}function S(e){var t=[];return er(e,function(e,n){C(e)&&t.push(n)}),t.sort()}function E(e,t){return e?Mn.call(e,t):!1}function I(e){for(var t=-1,n=Xn(e),r=n.length,o={};++t<r;){var u=n[t];o[e[u]]=u}return o}function j(e){return e===!0||e===!1||e&&"object"==typeof e&&An.call(e)==dn||!1}function B(e){return e&&"object"==typeof e&&An.call(e)==vn||!1}function T(e){return e&&1===e.nodeType||!1}function A(e){if(!e)return!0;if(zn(e)||q(e))return!e.length;for(var t in e)if(Mn.call(e,t))return!1;return!0}function O(e,t){return p(e,t)}function k(e){return qn(e)&&!Gn(parseFloat(e))}function C(e){return"function"==typeof e}function M(e){return!(!e||!wn[typeof e])}function N(e){return R(e)&&e!=+e}function L(e){return null===e}function R(e){return"number"==typeof e||e&&"object"==typeof e&&An.call(e)==hn||!1}function $(e){return e&&wn[typeof e]&&An.call(e)==_n||!1}function q(e){return"string"==typeof e||e&&"object"==typeof e&&An.call(e)==bn||!1}function G(e){return"undefined"==typeof e}function F(e){var t=[];er(e,function(e,n){t.push(n)}),t=l(t,f(arguments,!0,!1,1));for(var n=-1,r=t.length,o={};++n<r;){var u=t[n];o[u]=e[u]}return o}function J(e){for(var t=-1,n=Xn(e),r=n.length,o=Array(r);++t<r;){var u=n[t];o[t]=[u,e[u]]}return o}function U(e){for(var t=-1,n=f(arguments,!0,!1,1),r=n.length,o={};++t<r;){var u=n[t];u in e&&(o[u]=e[u])}return o}function W(e){for(var t=-1,n=Xn(e),r=n.length,o=Array(r);++t<r;)o[t]=e[n[t]];return o}function V(e,t){var n=y(),r=e?e.length:0,o=!1;return r&&"number"==typeof r?o=n(e,t)>-1:tr(e,function(e){return(o=e===t)&&an}),o}function z(e,t,n){var r=!0;t=Ft(t,n,3);var o=-1,u=e?e.length:0;if("number"==typeof u)for(;++o<u&&(r=!!t(e[o],o,e)););else tr(e,function(e,n,o){return!(r=!!t(e,n,o))&&an});return r}function H(e,t,n){var r=[];t=Ft(t,n,3);var o=-1,u=e?e.length:0;if("number"==typeof u)for(;++o<u;){var i=e[o];t(i,o,e)&&r.push(i)}else tr(e,function(e,n,o){t(e,n,o)&&r.push(e)});return r}function X(e,t,n){t=Ft(t,n,3);var r=-1,o=e?e.length:0;if("number"!=typeof o){var u;return tr(e,function(e,n,r){return t(e,n,r)?(u=e,an):void 0}),u}for(;++r<o;){var i=e[r];if(t(i,r,e))return i}}function K(e,t){return pt(e,t,!0)}function Q(e,t,n){var r=-1,o=e?e.length:0;if(t=t&&"undefined"==typeof n?t:s(t,n,3),"number"==typeof o)for(;++r<o&&t(e[r],r,e)!==an;);else tr(e,t)}function Y(e,t){var n=e?e.length:0;if("number"==typeof n)for(;n--&&t(e[n],n,e)!==!1;);else{var r=Xn(e);n=r.length,tr(e,function(e,o,u){return o=r?r[--n]:--n,t(u[o],o,u)===!1&&an})}}function Z(e,t){var n=r(arguments,2),o=-1,u="function"==typeof t,i=e?e.length:0,a=Array("number"==typeof i?i:0);return Q(e,function(e){a[++o]=(u?t:e[t]).apply(e,n)}),a}function et(e,t,n){var r=-1,o=e?e.length:0;if(t=Ft(t,n,3),"number"==typeof o)for(var u=Array(o);++r<o;)u[r]=t(e[r],r,e);else u=[],tr(e,function(e,n,o){u[++r]=t(e,n,o)});return u}function tt(e,t,n){var r=-1/0,o=r;"function"!=typeof t&&n&&n[t]===e&&(t=null);var u=-1,i=e?e.length:0;if(null==t&&"number"==typeof i)for(;++u<i;){var a=e[u];a>o&&(o=a)}else t=Ft(t,n,3),Q(e,function(e,n,u){var i=t(e,n,u);i>r&&(r=i,o=e)});return o}function nt(e,t,n){var r=1/0,o=r;"function"!=typeof t&&n&&n[t]===e&&(t=null);var u=-1,i=e?e.length:0;if(null==t&&"number"==typeof i)for(;++u<i;){var a=e[u];o>a&&(o=a)}else t=Ft(t,n,3),Q(e,function(e,n,u){var i=t(e,n,u);r>i&&(r=i,o=e)});return o}function rt(e,t,n,r){if(!e)return n;var o=arguments.length<3;t=Ft(t,r,4);var u=-1,i=e.length;if("number"==typeof i)for(o&&(n=e[++u]);++u<i;)n=t(n,e[u],u,e);else tr(e,function(e,r,u){n=o?(o=!1,e):t(n,e,r,u)});return n}function ot(e,t,n,r){var o=arguments.length<3;return t=Ft(t,r,4),Y(e,function(e,r,u){n=o?(o=!1,e):t(n,e,r,u)}),n}function ut(e,t,n){return t=Ft(t,n,3),H(e,function(e,n,r){return!t(e,n,r)})}function it(e,t,n){if(e&&"number"!=typeof e.length&&(e=W(e)),null==t||n)return e?e[g(0,e.length-1)]:on;var r=at(e);return r.length=Un(Jn(0,t),r.length),r}function at(e){var t=-1,n=e?e.length:0,r=Array("number"==typeof n?n:0);return Q(e,function(e){var n=g(0,++t);r[t]=r[n],r[n]=e}),r}function st(e){var t=e?e.length:0;return"number"==typeof t?t:Xn(e).length}function ct(e,t,n){var r;t=Ft(t,n,3);var o=-1,u=e?e.length:0;if("number"==typeof u)for(;++o<u&&!(r=t(e[o],o,e)););else tr(e,function(e,n,o){return(r=t(e,n,o))&&an});return!!r}function lt(e,n,r){var o=-1,u=e?e.length:0,i=Array("number"==typeof u?u:0);for(n=Ft(n,r,3),Q(e,function(e,t,r){i[++o]={criteria:[n(e,t,r)],index:o,value:e}}),u=i.length,i.sort(t);u--;)i[u]=i[u].value;return i}function ft(e){return zn(e)?r(e):e&&"number"==typeof e.length?et(e):W(e)}function pt(e,t,n){return n&&A(t)?on:(n?X:H)(e,t)}function gt(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var o=e[t];o&&r.push(o)}return r}function dt(e){return l(e,f(arguments,!0,!0,1))}function vt(e,t,n){var o=0,u=e?e.length:0;if("number"!=typeof t&&null!=t){var i=-1;for(t=Ft(t,n,3);++i<u&&t(e[i],i,e);)o++}else if(o=t,null==o||n)return e?e[0]:on;return r(e,0,Un(Jn(0,o),u))}function mt(e,t){return f(e,t)}function ht(t,n,r){if("number"==typeof r){var o=t?t.length:0;r=0>r?Jn(0,o+r):r||0}else if(r){var u=xt(t,n);return t[u]===n?u:-1}return e(t,n,r)}function yt(e,t,n){var o=0,u=e?e.length:0;if("number"!=typeof t&&null!=t){var i=u;for(t=Ft(t,n,3);i--&&t(e[i],i,e);)o++}else o=null==t||n?1:t||o;return r(e,0,Un(Jn(0,u-o),u))}function _t(){for(var e=[],t=-1,n=arguments.length;++t<n;){var r=arguments[t];(zn(r)||w(r))&&e.push(r)}var o=e[0],u=-1,i=y(),a=o?o.length:0,s=[];e:for(;++u<a;)if(r=o[u],i(s,r)<0){for(var t=n;--t;)if(i(e[t],r)<0)continue e;s.push(r)}return s}function bt(e,t,n){var o=0,u=e?e.length:0;if("number"!=typeof t&&null!=t){var i=u;for(t=Ft(t,n,3);i--&&t(e[i],i,e);)o++}else if(o=t,null==o||n)return e?e[u-1]:on;return r(e,Jn(0,u-o))}function wt(e,t,n){var r=e?e.length:0;for("number"==typeof n&&(r=(0>n?Jn(0,r+n):Un(n,r-1))+1);r--;)if(e[r]===t)return r;return-1}function Dt(e,t,n){e=+e||0,n=+n||1,null==t&&(t=e,e=0);for(var r=-1,o=Jn(0,kn((t-e)/n)),u=Array(o);++r<o;)u[r]=e,e+=n;return u}function Pt(e,t,n){if("number"!=typeof t&&null!=t){var o=0,u=-1,i=e?e.length:0;for(t=Ft(t,n,3);++u<i&&t(e[u],u,e);)o++}else o=null==t||n?1:Jn(0,t);return r(e,o)}function xt(e,t,n,r){var o=0,u=e?e.length:o;for(n=n?Ft(n,r,1):Ut,t=n(t);u>o;){var i=o+u>>>1;n(e[i])<t?o=i+1:u=i}return o}function St(){return d(f(arguments,!0,!0))}function Et(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n="function"!=typeof t&&r&&r[t]===e?null:t,t=!1),null!=n&&(n=Ft(n,r,3)),d(e,t,n)}function It(e){return l(e,r(arguments,1))}function jt(){for(var e=-1,t=tt(ur(arguments,"length")),n=Array(0>t?0:t);++e<t;)n[e]=ur(arguments,e);return n}function Bt(e,t){var n=-1,r=e?e.length:0,o={};for(t||!r||zn(e[0])||(t=[]);++n<r;){var u=e[n];t?o[u]=t[n]:u&&(o[u[0]]=u[1])}return o}function Tt(e,t){if(!C(t))throw new TypeError;return function(){return--e<1?t.apply(this,arguments):void 0}}function At(e,t){return arguments.length>2?m(e,17,r(arguments,2),null,t):m(e,1,null,null,t)}function Ot(e){for(var t=arguments.length>1?f(arguments,!0,!1,1):S(e),n=-1,r=t.length;++n<r;){var o=t[n];e[o]=m(e[o],1,null,null,e)}return e}function kt(){for(var e=arguments,t=e.length;t--;)if(!C(e[t]))throw new TypeError;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}}function Ct(e,t,n){var r,o,u,i,a,s,c,l=0,f=!1,p=!0;if(!C(e))throw new TypeError;if(t=Jn(0,t)||0,n===!0){var g=!0;p=!1}else M(n)&&(g=n.leading,f="maxWait"in n&&(Jn(t,n.maxWait)||0),p="trailing"in n?n.trailing:p);var d=function(){var n=t-(ir()-i);if(0>=n){o&&clearTimeout(o);var f=c;o=s=c=on,f&&(l=ir(),u=e.apply(a,r),s||o||(r=a=null))}else s=setTimeout(d,n)},v=function(){s&&clearTimeout(s),o=s=c=on,(p||f!==t)&&(l=ir(),u=e.apply(a,r),s||o||(r=a=null))};return function(){if(r=arguments,i=ir(),a=this,c=p&&(s||!g),f===!1)var n=g&&!s;else{o||g||(l=i);var m=f-(i-l),h=0>=m;h?(o&&(o=clearTimeout(o)),l=i,u=e.apply(a,r)):o||(o=setTimeout(v,m))}return h&&s?s=clearTimeout(s):s||t===f||(s=setTimeout(d,t)),n&&(h=!0,u=e.apply(a,r)),!h||s||o||(r=a=null),u}}function Mt(e){if(!C(e))throw new TypeError;var t=r(arguments,1);return setTimeout(function(){e.apply(on,t)},1)}function Nt(e,t){if(!C(e))throw new TypeError;var n=r(arguments,2);return setTimeout(function(){e.apply(on,n)},t)}function Lt(e,t){var n={};return function(){var r=t?t.apply(this,arguments):sn+arguments[0];return Mn.call(n,r)?n[r]:n[r]=e.apply(this,arguments)}}function Rt(e){var t,n;if(!C(e))throw new TypeError;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function $t(e){return m(e,16,r(arguments,1))}function qt(e,t,n){var r=!0,o=!0;if(!C(e))throw new TypeError;return n===!1?r=!1:M(n)&&(r="leading"in n?n.leading:r,o="trailing"in n?n.trailing:o),n={},n.leading=r,n.maxWait=t,n.trailing=o,Ct(e,t,n)}function Gt(e,t){return m(t,16,[e])}function Ft(e,t,n){var r=typeof e;if(null==e||"function"==r)return s(e,t,n);if("object"!=r)return zt(e);var o=Xn(e);return function(t){for(var n=o.length,r=!1;n--&&(r=t[o[n]]===e[o[n]]););return r}}function Jt(e){return null==e?"":String(e).replace(Zn,h)}function Ut(e){return e}function Wt(e){Q(S(e),function(t){var n=o[t]=e[t];o.prototype[t]=function(){var e=[this.__wrapped__];Nn.apply(e,arguments);var t=n.apply(o,e);return this.__chain__?new u(t,!0):t}})}function Vt(){return Pn._=Tn,this}function zt(e){return function(t){return t[e]}}function Ht(e,t){return null==e&&null==t&&(t=1),e=+e||0,null==t?(t=e,e=0):t=+t||0,e+Cn(Wn()*(t-e+1))}function Xt(e,t){if(e){var n=e[t];return C(n)?e[t]():n}}function Kt(e,t,r){var u=o,i=u.templateSettings;e=String(e||""),r=x({},r,i);var a=0,s="__p += '",c=r.variable,l=RegExp((r.escape||ln).source+"|"+(r.interpolate||ln).source+"|"+(r.evaluate||ln).source+"|$","g");e.replace(l,function(t,r,o,u,i){return s+=e.slice(a,i).replace(fn,n),r&&(s+="' +\n_.escape("+r+") +\n'"),u&&(s+="';\n"+u+";\n__p += '"),o&&(s+="' +\n((__t = ("+o+")) == null ? '' : __t) +\n'"),a=i+t.length,t}),s+="';\n",c||(c="obj",s="with ("+c+" || {}) {\n"+s+"\n}\n"),s="function("+c+") {\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n"+s+"return __p\n}";try{var f=Function("_","return "+s)(u)}catch(p){throw p.source=s,p}return t?f(t):(f.source=s,f)}function Qt(e,t,n){e=(e=+e)>-1?e:0;var r=-1,o=Array(e);for(t=s(t,n,1);++r<e;)o[r]=t(r);return o}function Yt(e){return null==e?"":String(e).replace(Yn,b)}function Zt(e){var t=++un+"";return e?e+t:t}function en(e){return e=new u(e),e.__chain__=!0,e}function tn(e,t){return t(e),e}function nn(){return this.__chain__=!0,this}function rn(){return this.__wrapped__}var on,un=0,an={},sn=+new Date+"",cn=/<%=([\s\S]+?)%>/g,ln=/($^)/,fn=/['\n\r\t\u2028\u2029\\]/g,pn="[object Arguments]",gn="[object Array]",dn="[object Boolean]",vn="[object Date]",mn="[object Function]",hn="[object Number]",yn="[object Object]",_n="[object RegExp]",bn="[object String]",wn={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Dn={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},Pn=wn[typeof window]&&window||this,xn=wn[typeof exports]&&exports&&!exports.nodeType&&exports,Sn=wn[typeof module]&&module&&!module.nodeType&&module,En=Sn&&Sn.exports===xn&&xn,In=wn[typeof global]&&global;!In||In.global!==In&&In.window!==In||(Pn=In);var jn=[],Bn=Object.prototype,Tn=Pn._,An=Bn.toString,On=RegExp("^"+String(An).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),kn=Math.ceil,Cn=Math.floor,Mn=Bn.hasOwnProperty,Nn=jn.push,Ln=Bn.propertyIsEnumerable,Rn=_(Rn=Object.create)&&Rn,$n=_($n=Array.isArray)&&$n,qn=Pn.isFinite,Gn=Pn.isNaN,Fn=_(Fn=Object.keys)&&Fn,Jn=Math.max,Un=Math.min,Wn=Math.random;u.prototype=o.prototype;var Vn={};!function(){var e={0:1,length:1};Vn.spliceObjects=(jn.splice.call(e,0,1),!e[0])}(1),o.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:cn,variable:""},Rn||(a=function(){function e(){}return function(t){if(M(t)){e.prototype=t;var n=new e;e.prototype=null}return n||Pn.Object()}}()),w(arguments)||(w=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Mn.call(e,"callee")&&!Ln.call(e,"callee")||!1});var zn=$n||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&An.call(e)==gn||!1},Hn=function(e){var t,n=e,r=[];if(!n)return r;if(!wn[typeof e])return r;for(t in n)Mn.call(n,t)&&r.push(t);return r},Xn=Fn?function(e){return M(e)?Fn(e):[]}:Hn,Kn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Qn=I(Kn),Yn=RegExp("("+Xn(Qn).join("|")+")","g"),Zn=RegExp("["+Xn(Kn).join("")+"]","g"),er=function(e,t){var n,r=e,o=r;if(!r)return o;if(!wn[typeof r])return o;for(n in r)if(t(r[n],n,e)===an)return o;return o},tr=function(e,t){var n,r=e,o=r;if(!r)return o;if(!wn[typeof r])return o;for(n in r)if(Mn.call(r,n)&&t(r[n],n,e)===an)return o;return o};C(/x/)&&(C=function(e){return"function"==typeof e&&An.call(e)==mn});var nr=v(function(e,t,n){Mn.call(e,n)?e[n]++:e[n]=1}),rr=v(function(e,t,n){(Mn.call(e,n)?e[n]:e[n]=[]).push(t)}),or=v(function(e,t,n){e[n]=t}),ur=et,ir=_(ir=Date.now)&&ir||function(){return(new Date).getTime()};o.after=Tt,o.bind=At,o.bindAll=Ot,o.chain=en,o.compact=gt,o.compose=kt,o.countBy=nr,o.debounce=Ct,o.defaults=x,o.defer=Mt,o.delay=Nt,o.difference=dt,o.filter=H,o.flatten=mt,o.forEach=Q,o.functions=S,o.groupBy=rr,o.indexBy=or,o.initial=yt,o.intersection=_t,o.invert=I,o.invoke=Z,o.keys=Xn,o.map=et,o.max=tt,o.memoize=Lt,o.min=nt,o.omit=F,o.once=Rt,o.pairs=J,o.partial=$t,o.pick=U,o.pluck=ur,o.range=Dt,o.reject=ut,o.rest=Pt,o.shuffle=at,o.sortBy=lt,o.tap=tn,o.throttle=qt,o.times=Qt,o.toArray=ft,o.union=St,o.uniq=Et,o.values=W,o.where=pt,o.without=It,o.wrap=Gt,o.zip=jt,o.collect=et,o.drop=Pt,o.each=Q,o.extend=D,o.methods=S,o.object=Bt,o.select=H,o.tail=Pt,o.unique=Et,o.clone=P,o.contains=V,o.escape=Jt,o.every=z,o.find=X,o.has=E,o.identity=Ut,o.indexOf=ht,o.isArguments=w,o.isArray=zn,o.isBoolean=j,o.isDate=B,o.isElement=T,o.isEmpty=A,o.isEqual=O,o.isFinite=k,o.isFunction=C,o.isNaN=N,o.isNull=L,o.isNumber=R,o.isObject=M,o.isRegExp=$,o.isString=q,o.isUndefined=G,o.lastIndexOf=wt,o.mixin=Wt,o.noConflict=Vt,o.random=Ht,o.reduce=rt,o.reduceRight=ot,o.result=Xt,o.size=st,o.some=ct,o.sortedIndex=xt,o.template=Kt,o.unescape=Yt,o.uniqueId=Zt,o.all=z,o.any=ct,o.detect=X,o.findWhere=K,o.foldl=rt,o.foldr=ot,o.include=V,o.inject=rt,o.first=vt,o.last=bt,o.sample=it,o.take=vt,o.head=vt,Wt(o),o.VERSION="2.4.1",o.prototype.chain=nn,o.prototype.value=rn,Q(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=jn[e];o.prototype[e]=function(){var e=this.__wrapped__;return t.apply(e,arguments),Vn.spliceObjects||0!==e.length||delete e[0],this}}),Q(["concat","join","slice"],function(e){var t=jn[e];o.prototype[e]=function(){var e=this.__wrapped__,n=t.apply(e,arguments);return this.__chain__&&(n=new u(n),n.__chain__=!0),n}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Pn._=o,define(function(){return o})):xn&&Sn?En?(Sn.exports=o)._=o:xn._=o:Pn._=o}).call(this);var DrivePass=DrivePass||{};DrivePass.Browser={isChrome:function(){return/Chrome/.test(navigator.userAgent)},ChromeExt:function(){this.isChrome()&&(chrome.runtime?chrome.runtime.onMessage||(chrome.runtime.onMessage=chrome.extension.onMessage,chrome.runtime.sendMessage=chrome.extension.sendMessage,chrome.runtime.onConnect=chrome.extension.onConnect,chrome.runtime.connect=chrome.extension.connect):chrome.runtime=chrome.extension)},isFirefox:function(){return/Firefox/.test(navigator.userAgent)},sendToPage:function(e){var t=e||{};return 2!==Object.keys(t).length?!1:void(this.isChrome()&&chrome.tabs.getSelected(null,function(e){chrome.tabs.sendMessage(e.id,{password:t.password,username:t.username},function(e){console.log(e.dom)})}))},getActiveTab:function(e){this.isChrome()&&chrome.tabs.query({active:!0,lastFocusedWindow:!0},function(t){var n=t[0];this.activeTabUrl=utils.getHostname(n.url),"function"==typeof e&&e()}.bind(this))},oAuthSendRequest:function(e,t,n){this.isChrome()&&(this.ChromeExt(),chrome.runtime.getBackgroundPage(function(r){r.oauth.sendSignedRequest(e,t,n)}))}};var DrivePass=DrivePass||{};DrivePass.GoogleDrive=function(){var e={};e.driveAPI="https://www.googleapis.com/upload/drive/v2/files";var t=function(e,t){console.log(e),console.log(t)},n=function(n,r){e.cb="function"==typeof r?r:t;var o={method:"POST",params:{convert:!0,uploadType:"media",visibility:"private"},headers:{"Content-Type":"text/csv"},body:"site,username,password"};DrivePass.Browser.oAuthSendRequest(e.driveAPI,e.cb,o)};return{create:n}};var DrivePass=DrivePass||{};DrivePass.GoogleSpreadsheet=function(){var e,t={},n=function(n,r){return 200!==r.status?(e={success:!1,message:r.status+": Connection Failed"},console.warn(r)):(e={success:!0,message:"spreadsheet successfully loaded"},e.sheetData=JSON.parse(n)),DrivePass.Signal.broadcast("gs_data_loaded",e),null!==t.cb&&t.cb(e),e},r=function(e){t.cb="function"==typeof e?e:null;var r={headers:{"GData-Version":"3.0"},parameters:{alt:"json",showfolders:"true"}};DrivePass.Browser.oAuthSendRequest(t.jsonListUrl,n,r)},o=function(e,n){t.cb="function"==typeof n?n:null;var r={method:"POST",headers:{"GData-Version":"3.0","Content-Type":"application/atom+xml"},body:u(e)};DrivePass.Browser.oAuthSendRequest(t.jsonListUrl,s,r)},u=function(e){for(var n='<entry xmlns="http://www.w3.org/2005/Atom" xmlns:gsx="http://schemas.google.com/spreadsheets/2006/extended">\n',r=t.columns,o=0;o<r.length;o++)n+="<gsx:"+r[o]+">"+e[o]+"</gsx:"+r[o]+">\n";return n+="</entry>"},i=function(e,n){var r="<entry xmlns='http://www.w3.org/2005/Atom' xmlns:gsx='http://schemas.google.com/spreadsheets/2006/extended' ";r+="xmlns:gd='http://schemas.google.com/g/2005' gd:etag='"+e.gd$etag+"'>\n",r+="<id>"+e.id.$t+"</id>\n",r+="<updated>"+e.updated.$t+"</updated>\n",r+='<category scheme="http://schemas.google.com/spreadsheets/2006" term="http://schemas.google.com/spreadsheets/2006#list"/>\n',r+="<title type='text'>"+e.title.$t+"</title>\n",r+="<content type='text'>"+e.content.$t+"</content>\n",r+='<link rel="self" type="application/atom+xml" href="'+e.link[0].href+'"/>\n',r+='<link rel="edit" type="application/atom+xml" href="'+e.link[1].href+'"/>\n';for(var o=t.columns,u=0;u<o.length;u++)r+="<gsx:"+o[u]+">"+n[u]+"</gsx:"+o[u]+">\n";return r+="</entry>"},a=function(e,n,r){t.cb="function"==typeof r?r:null;var o={method:"PUT",headers:{"GData-Version":"3.0","Content-Type":"application/atom+xml","if-match":"*"},body:i(e,n)};DrivePass.Browser.oAuthSendRequest(e.link[1].href,c,o)},s=function(n,r){return 201!==r.status?(e={success:!1,message:r.status+": error saving"},console.warn(r)):e={success:!0,message:"saved successfully"},DrivePass.Signal.broadcast("gs_data_added",e),null!==t.cb&&t.cb(e),e},c=function(n,r){return 200!==r.status?(e={success:!1,message:r.status+": error updating"},console.warn(r)):e={success:!0,message:"update successful"},DrivePass.Signal.broadcast("gs_data_updated",e),null!==t.cb&&t.cb(e),e},l=function(e){if(t=e||{},"string"!=typeof t.sheet_url||"object"!=typeof t.columns)throw new Error("Missing sheet_url or columns from init options");var n,r,o=t.sheet_url;if(o.match(/http(s)*:/)){n=o;try{r=n.match(/key=(.*?)(&|#)/)[1]}catch(u){r=n.match(/(cells|list)\/(.*?)\//)[2]}}else r=o;return t.jsonListUrl="https://spreadsheets.google.com/feeds/list/"+r+"/od6/private/full",t.jsonCellsUrl="https://spreadsheets.google.com/feeds/cells/"+r+"/od6/private/basic",this};return{init:l,load:r,add:o,update:a}};var DrivePass=DrivePass||{};DrivePass.Options=function(){function e(){var e=o.value,t=r.value;localStorage.setItem("sheet_url",e),localStorage.setItem("app_name",t),DrivePass.Settings.gs_sheet_init.sheet_url=e,n.init(DrivePass.Settings.gs_sheet_init),DrivePass.Signal.listen("gs_data_loaded",function(e,t){localStorage.setItem("_data",JSON.stringify(t))}),n.load(),u.textContent="Options Saved.",l&&_.delay(chrome.runtime.reload,1e3)}function t(){var e=localStorage.getItem("sheet_url"),t=localStorage.getItem("app_name");return r.value=t,null===e||""===e?!1:(o.value=e,a.textContent="update",s.href=e,s.style.display="block",void 0)}var n=new DrivePass.GoogleSpreadsheet,r=document.getElementById("appName"),o=document.getElementById("sheet_url"),u=document.getElementById("status"),i=document.getElementById("setAppName"),a=document.getElementById("save"),s=document.getElementById("goToSheet"),c=document.getElementById("makeSheet"),l=!1;utils.toggler("inst_link","instructions");var f=localStorage.getItem("app_name");null===f&&(i.classList.add("show"),l=!0),document.addEventListener("DOMContentLoaded",t),a.addEventListener("click",e);new DrivePass.GoogleDrive;c.addEventListener("click",function(e){e.preventDefault()})};var DrivePass=DrivePass||{};DrivePass.Generator=function(){var e=document.getElementById("uppercase"),t=document.getElementById("lowercase"),n=document.getElementById("numbers"),r=document.getElementById("show_symbols"),o=document.getElementById("symbols"),u=document.getElementById("pw"),i=function(){var u="",i=0,a="",s=document.getElementById("digits").value||15;if(2>s&&(s=7),[e,t,n].forEach(function(e){if(e.checked===!0){a+=e.value;var t=e.value.length;u+=e.value.charAt(Math.floor(Math.random()*t)),i++}}),r.checked===!0){a+=o.value;var c=o.value.length;u+=o.value.charAt(Math.floor(Math.random()*c)),i++}return[s,a,u,i]},a=function(e){e.preventDefault();for(var t=i(),n=t[0]-t[3],r=t[1],o="",a=0,s=r.length;n>a;++a)o+=r.charAt(Math.floor(Math.random()*s));return o+=t[2],u.textContent=o,u.className="generated",!0},s=function(){document.getElementById("makePassword").addEventListener("click",a,!1)};return{init:s}};var DrivePass=DrivePass||{};DrivePass.Password={findPW:function(e,t){var n=e||{},r=[];if(Object.keys(n).length){for(var o in n)-1!==t.indexOf(n[o].site)&&r.push(n[o].username,n[o].password,n[o].site);return r}throw new Error("findPW: data not an object")},filterResults:function(e){var t=e||{},n=0,r={},o=t.feed.entry,u=DrivePass.Settings.gs_sheet_init.columns;for(var i in o){r[n]={};for(var a=0;a<u.length;a++){var s="gsx$"+u[a];r[n][u[a]]=o[i][s].$t}n++}return r}};var DrivePass=DrivePass||{};DrivePass.Popup=function(){var e,t=document.getElementById("loading"),n=document.getElementById("status"),r=document.getElementById("un"),o=document.getElementById("pw"),u=document.getElementById("add"),i=document.getElementById("update"),a=document.getElementById("theInfo"),s=document.getElementById("hdnSite"),c=JSON.parse(localStorage.getItem("_data")),l=JSON.parse(localStorage.getItem("_full")),f=new DrivePass.GoogleSpreadsheet;f.init(DrivePass.Settings.gs_sheet_init);var p=function(e,t){var r=e||"",o=t||"";""!==r&&""!==o&&(n.textContent=o,n.className=r,n.style.display="block")},g=function(e){t.style.display="none",p("success","password found"),r.textContent=e[0],o.textContent=e[1],s.value=e[2],DrivePass.Browser.sendToPage({username:e[0],password:e[1]}),u.classList.remove("show"),i.classList.add("show")},d=function(){t.style.display="none",p("error","password not found"),utils.toggle(a)},v=function(){u.addEventListener("click",function(){var t=document.getElementById("un").textContent,n=document.getElementById("pw").textContent,r=[e,t,n];f.add(r,function(e){e.success===!1?p("error",e.message):(p("success",e.message),_())})},!1)},m=function(){i.addEventListener("click",function(){var e=s.value,t=h(e),n=document.getElementById("un").textContent,r=document.getElementById("pw").textContent,o=[e,n,r];f.update(t,o,function(e){e.success===!1?p("error",e.message):(p("success",e.message),_())})},!1)},h=function(e){var t=l.sheetData;for(var n in t.feed.entry)if(t.feed.entry[n].gsx$site.$t===e)return t.feed.entry[n]},y=function(){e=DrivePass.Browser.activeTabUrl;var t=DrivePass.Password.findPW(c,e);3!==t.length?d():g(t)},_=function(e){f.load(function(t){localStorage.setItem("_full",JSON.stringify(t)),t.success===!0&&(c=DrivePass.Password.filterResults(t.sheetData),localStorage.setItem("_data",JSON.stringify(c)),"function"==typeof e&&e())})},b=function(){localStorage.sheet_url&&""!==localStorage.sheet_url?(null===c||null===l?_(function(){DrivePass.Browser.getActiveTab(y)}):DrivePass.Browser.getActiveTab(y),v(),m()):p("error","no spreadsheet set in options")};return{init:b}};var DrivePass=DrivePass||{};DrivePass.Router=function(){function e(e){this.methods=e,this.process()}return e.prototype.process=function(){this.methods.universal();var e=document.body.dataset.route;if("undefined"!=typeof e){var t=this.methods[e];"function"==typeof t&&t()}},e}();var DrivePass=DrivePass||{};DrivePass.Signal=function(){"use strict";var e={},t=-1,n=function(n,r){e[n]||(e[n]=[]);var o=(++t).toString();return e[n].push({token:o,func:r}),o},r=function(t,n){return e[t]?(setTimeout(function(){for(var r=e[t],o=r?r.length:0;o--;)r[o].func(t,n)},0),!0):!1},o=function(t){for(var n in e)if(e[n])for(var r=0,o=e[n].length;o>r;r++)if(e[n][r].token===t)return e[n].splice(r,1),t;return!1};return{broadcast:r,listen:n,off:o}}();var utils={toggle:function(e){e.classList.contains("show")?e.classList.remove("show"):e.classList.add("show")},toggler:function(e,t){var n=this,r=document.getElementById(t);document.getElementById(e).addEventListener("click",function(){n.toggle(r)},!1)},getHostname:function(e){var t=e||"",n=document.createElement("a");return""!==t?(n.href=t,n.hostname):(console.warn("url undefined"),!1)},addslashes:function(e){return(e+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")},getJSON:function(e,t,n){var r,o=new XMLHttpRequest,u=function(){console.log("")},i="function"==typeof t?t:u,a="function"==typeof n?n:u;o.open("GET",e,!1),o.onload=function(){o.status>=200&&o.status<400?(r=JSON.parse(o.responseText),i(r)):a()},o.onerror=function(){a()},o.send(null)}},DrivePass=DrivePass||{};DrivePass.ext=new DrivePass.Router({universal:function(){DrivePass.Settings=JSON.parse(localStorage.getItem("options"))||{},DrivePass.Settings.keeplocal=DrivePass.Settings.keeplocal||!0,DrivePass.Settings.route=document.body.dataset.route,DrivePass.Settings.gs_sheet_init={sheet_url:localStorage.getItem("sheet_url"),columns:["site","username","password"]}},popup:function(){var e=function(){utils.toggler("showGPoptions","gpOptions"),utils.toggler("showInfo","theInfo"),utils.toggler("show_symbols","hidden_symbols")},t=new DrivePass.Popup,n=new DrivePass.Generator;document.addEventListener("DOMContentLoaded",function(){this.bDone||(this.bDone=!0,n.init(),t.init(),e())})},chrome_options:function(){new DrivePass.Options}});